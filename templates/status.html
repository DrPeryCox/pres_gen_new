<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Статус генерации видео</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    {% if status not in ['SUCCESS', 'FAILURE'] %}
        <meta http-equiv="refresh" content="5">
    {% endif %}
    <style>
        body { background-color: #f8f9fa; }
        .card { max-width: 600px; margin: 5rem auto; }
    </style>
</head>
<body>
    <div class="container">
        <div class="card text-center">
            <div class="card-header">
                Статус задачи: {{ task_id }}
            </div>
            <div class="card-body">
                {% if status == 'SUCCESS' %}
                    <h5 class="card-title text-success">Видео успешно сгенерировано!</h5>
                    <p class="card-text">Нажмите кнопку ниже, чтобы скачать ваш файл.</p>
                    <a href="/download-video/{{ task_id }}" class="btn btn-primary">Скачать MP4</a>
                {% elif status == 'FAILURE' %}
                    <h5 class="card-title text-danger">Произошла ошибка</h5>
                    <p class="card-text">К сожалению, во время генерации видео произошла ошибка.</p>
                    <pre class="text-start p-2 bg-light border rounded"><code>{{ result }}</code></pre>
                {% else %}
                    <h5 class="card-title text-info">Видео в процессе создания...</h5>
                    <div class="progress mt-3" style="height: 25px;">
                        <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" style="width: 100%" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100">
                            {{ status }}
                        </div>
                    </div>
                    <p class="card-text mt-3">Страница обновится автоматически через 5 секунд.</p>
                {% endif %}
            </div>
            <div class="card-footer text-muted">
                <a href="/">Вернуться на главную</a>
            </div>
        </div>
    </div>
</body>
</html>
